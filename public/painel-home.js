(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{212:function(n,t,e){"use strict";var a=e(22);e.n(a).a},213:function(n,t,e){(n.exports=e(7)(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* .row-value {\n  width: 100px;\n}\n.row-status {\n  width: 150px;\n}\n.row-action {\n  width: 120px;\n} */\n",""])},22:function(n,t,e){var a=e(213);"string"==typeof a&&(a=[[n.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};e(8)(a,r);a.locals&&(n.exports=a.locals)},278:function(n,t,e){"use strict";e.r(t);var a=e(1),r=e.n(a),s=e(4);function o(n,t,e,a,r,s,o){try{var i=n[s](o),l=i.value}catch(n){return void e(n)}i.done?t(l):Promise.resolve(l).then(a,r)}function i(n){return function(){var t=this,e=arguments;return new Promise((function(a,r){var s=n.apply(t,e);function i(n){o(s,a,r,i,l,"next",n)}function l(n){o(s,a,r,i,l,"throw",n)}i(void 0)}))}}var l={data:function(){return{id:-1,order:{status:""},modal:{title:"Confirma Pagamento",loadingTitle:"",size:"sm",loading:!0,operating:!1,success:!1},statusOptions:["Pago","Aguardando","Cancelar"]}},methods:{featOrder:function(){var n=this;return i(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.b.show(n.id).then((function(t){n.order=t.data,n.modal.loading=!1}));case 2:case"end":return t.stop()}}),t)})))()},saveOrder:function(){var n=this;return i(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.modal.operating=!0,t.next=3,s.b.update(n.id,{status:n.order.status}).then((function(t){n.$emit("update"),n.modal.operating=!1,n.close()}));case 3:case"end":return t.stop()}}),t)})))()},show:function(n){this.id=n,this.featOrder(n),this.$refs.modalOrder.show()},close:function(){this.order={status:""},this.$refs.modalOrder.hide()}}},c=e(3);function d(n,t,e,a,r,s,o){try{var i=n[s](o),l=i.value}catch(n){return void e(n)}i.done?t(l):Promise.resolve(l).then(a,r)}var u={data:function(){return{id:-1,order:{},modal:{title:"Confirma Pagamento",loadingTitle:"",size:"sm",loading:!0,operating:!1,success:!1}}},methods:{featOrder:function(){var n,t=this;return(n=r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.b.show(t.id).then((function(n){t.order=n.data,t.modal.loading=!1}));case 2:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(a,r){var s=n.apply(t,e);function o(n){d(s,a,r,o,i,"next",n)}function i(n){d(s,a,r,o,i,"throw",n)}o(void 0)}))})()},show:function(n){this.id=n,this.featOrder(n),this.$refs.modalOrder.show()},close:function(){this.order={},this.$refs.modalOrder.hide()}}};function f(n,t,e,a,r,s,o){try{var i=n[s](o),l=i.value}catch(n){return void e(n)}i.done?t(l):Promise.resolve(l).then(a,r)}var m={data:function(){return{id:-1,modal:{title:"Apagar pagamento",loadingTitle:"",size:"md",loading:!1,operating:!1,success:!1}}},methods:{remove:function(){var n,t=this;return(n=r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.modal.operating=!0,n.next=3,s.b.delete(t.id).then((function(n){t.modal.operating=!1,t.$emit("update"),t.close()}));case 3:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(a,r){var s=n.apply(t,e);function o(n){f(s,a,r,o,i,"next",n)}function i(n){f(s,a,r,o,i,"throw",n)}o(void 0)}))})()},show:function(n){this.id=n,this.$refs.modal.show()},close:function(){this.$refs.modal.hide()}}};function p(n,t,e,a,r,s,o){try{var i=n[s](o),l=i.value}catch(n){return void e(n)}i.done?t(l):Promise.resolve(l).then(a,r)}function b(n){return function(){var t=this,e=arguments;return new Promise((function(a,r){var s=n.apply(t,e);function o(n){p(s,a,r,o,i,"next",n)}function i(n){p(s,a,r,o,i,"throw",n)}o(void 0)}))}}var v={components:{"order-edit":Object(c.a)(l,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("b-modal",{ref:"modalOrder",staticClass:"p-2",attrs:{size:n.modal.size,"title-html":"<h5>"+n.modal.title+"</h5>"},scopedSlots:n._u([{key:"modal-footer",fn:function(){return[e("b-row",{staticClass:"d-flex justify-content-end"},[e("b-col",{staticClass:"d-flex justify-content-end",attrs:{sm:"6"}},[e("b-button",{staticClass:"mt-4 mr-2",attrs:{type:"button",squared:""},on:{click:n.close}},[e("b",[n._v("CANCELAR")])]),n._v(" "),e("b-button",{staticClass:"mt-4",class:{"show-success":!n.modal.operating&&n.modal.success},attrs:{variant:"primary",squared:""},on:{click:function(t){return n.saveOrder()}}},[n.modal.operating?e("b-spinner",{attrs:{variant:"light",small:""}}):e("b",[n._v("SALVAR")])],1)],1)],1)]},proxy:!0}])},[n.modal.loading?e("b-row",{staticClass:"d-flex justify-content-center"},[e("b-spinner",{attrs:{size:"md",variant:"primary"}}),n._v(" "+n._s(n.modal.loadingTitle)+"\n  ")],1):n._e(),n._v(" "),n.modal.loading||-1==n.id?n._e():e("div",[e("b-row",{staticClass:"d-flex justify-content-center"},[n._l(n.order.tickets,(function(t,a){return e("div",{key:"idx-"+a},[e("b-badge",{staticClass:"p-2 m-1",attrs:{variant:"success"}},[n._v(n._s(("0000"+t.ticket).slice(-4)))])],1)})),n._v(" "),e("b-col",{attrs:{md:"10",sm:"6"}},[e("b",[n._v("Cliente:")]),n._v(" "),e("p",[n._v(n._s(n.order.name))])]),n._v(" "),e("b-col",{attrs:{md:"10",sm:"6"}},[e("b",[n._v("Telefone:")]),n._v(" "),e("p",[n._v(n._s(n.order.phone))])]),n._v(" "),e("b-col",{attrs:{md:"10",sm:"6"}},[e("b",[n._v("Total:")]),n._v(" "),e("p",[n._v(n._s(Number(n.order.value_total).toFixed(2)))])]),n._v(" "),e("b-col",{attrs:{md:"10",sm:"6"}},[e("b-form-group",{attrs:{label:"Status"}},[e("v-select",{attrs:{options:n.statusOptions,reduce:function(n){return"Aguardando"===n?"waiting":"Pago"===n?"paid out":"canceled"}},model:{value:n.order.status,callback:function(t){n.$set(n.order,"status",t)},expression:"order.status"}})],1)],1)],2)],1)],1)}),[],!1,null,null,null).exports,"order-show":Object(c.a)(u,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("b-modal",{ref:"modalOrder",staticClass:"p-2",attrs:{size:n.modal.size,"title-html":"<h5>"+n.modal.title+"</h5>"},scopedSlots:n._u([{key:"modal-footer",fn:function(){return[e("b-row",{staticClass:"d-flex justify-content-end"},[e("b-col",{staticClass:"d-flex justify-content-end",attrs:{sm:"6"}},[e("b-button",{staticClass:"mt-4 mr-2",attrs:{type:"button",squared:""},on:{click:n.close}},[e("b",[n._v("CANCELAR")])])],1)],1)]},proxy:!0}])},[n.modal.loading?e("b-row",{staticClass:"d-flex justify-content-center"},[e("b-spinner",{attrs:{size:"md",variant:"primary"}}),n._v(" "+n._s(n.modal.loadingTitle)+"\n  ")],1):n._e(),n._v(" "),n.modal.loading||-1==n.id?n._e():e("div",[e("b-row",{staticClass:"d-flex justify-content-center"},[n._l(n.order.tickets,(function(t,a){return e("div",{key:"idx-"+a},[e("b-badge",{staticClass:"p-2 m-1",attrs:{variant:"success"}},[n._v(n._s(("0000"+t.ticket).slice(-4)))])],1)})),n._v(" "),e("b-col",{attrs:{md:"10",sm:"6"}},[e("b",[n._v("Cliente:")]),n._v(" "),e("p",[n._v(n._s(n.order.name))])]),n._v(" "),e("b-col",{attrs:{md:"10",sm:"6"}},[e("b",[n._v("Telefone:")]),n._v(" "),e("p",[n._v(n._s(n.order.phone))])]),n._v(" "),e("b-col",{attrs:{md:"10",sm:"6"}},[e("b",[n._v("Total:")]),n._v(" "),e("p",[n._v(n._s(Number(n.order.value_total).toFixed(2)))])]),n._v(" "),e("b-col",{attrs:{md:"10",sm:"6"}},[e("b",[n._v("Status:")]),n._v(" "),e("p",[n._v("\n          "+n._s("waiting"===n.order.status?"Aguardando":"paid out"===n.order.status?"Pago":"Cancelado")+"\n        ")])])],2)],1)],1)}),[],!1,null,null,null).exports,"order-delete":Object(c.a)(m,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("b-modal",{ref:"modal",attrs:{centered:"",size:n.modal.size,"title-html":"<h4><b>"+n.modal.title+"</b></h4>","hide-footer":""}},[n._v("\n  Você tem certeza disso?\n  "),e("b-row",{staticClass:"d-flex justify-content-end"},[e("b-col",{staticClass:"d-flex justify-content-end"},[e("b-button",{staticClass:"mt-4 mr-2",attrs:{type:"button",squared:""},on:{click:n.close}},[e("b",[n._v("CANCELAR")])]),n._v(" "),e("b-button",{staticClass:"mt-4",class:{"show-success":!n.modal.operating&&n.modal.success},attrs:{type:"button",squared:"",variant:"primary"},on:{click:n.remove}},[n.modal.operating?e("b-spinner",{attrs:{variant:"light",small:""}}):e("b",[n._v("APAGAR")])],1)],1)],1)],1)}),[],!1,null,null,null).exports,"raffle-edit":e(33).a},data:function(){return{page:1,perPage:10,total:0,lastPage:0,isBusy:!1,fields:[{key:"title",label:"Titulo",sortable:!0},{key:"tickets",label:"Numero de tickets",sortable:!0},{key:"created_at",label:"Data de Cadastro",sortable:!0},{key:"draw_day",label:"Dia sorteio",sortable:!0},{key:"action",label:"Opções",sortable:!0}],orderTable:{page:1,perPage:10,total:0,lastPage:0,filter:null,isBusy:!1,filterOn:[],fields:[{key:"name",label:"Cliente",sortable:!0},{key:"tickets",label:"Tickets",sortable:!0},{key:"raffle",label:"Rifa",sortable:!0},{key:"created_at",label:"Compra",class:"row-action",sortable:!0},{key:"expired_day",label:"Expiração",class:"row-action",sortable:!0},{key:"status",class:"row-status",label:"Status",sortable:!0,formatter:function(n){return"waiting"===n?"Aguardando":"paid out"===n?"Pago":"Cancelado"}},{key:"value_total",label:"Valor",class:"row-value",sortable:!0,formatter:function(n){return"R$ ".concat(Number(n).toFixed(2))}},{key:"action",label:"Opções",class:"row-action",sortable:!0}]}}},methods:{fetchRaffle:function(n){var t=this;return b(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.isBusy=!0,e.next=4,s.d.listValiable(n.currentPage,n.perPage).then((function(e){t.total=e.data.total,a=e.data.data,t.perPage=n.perPage,t.page=n.currentPage,t.lastPage=e.data.last_page})).catch((function(){a=[]}));case 4:return t.isBusy=!1,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))()},fetchOrders:function(n){var t=this;return b(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.orderTable.isBusy=!0,e.next=4,s.b.list(n.currentPage,n.perPage,n.filter).then((function(e){t.orderTable.total=e.data.total,a=e.data.data,t.orderTable.perPage=n.perPage,t.orderTable.page=n.currentPage,t.orderTable.lastPage=e.data.last_page})).catch((function(){a=[]}));case 4:return t.orderTable.isBusy=!1,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))()},updateTableRaffle:function(){this.$refs.tableRaffle.refresh()},updateTable:function(){this.$refs.orderTable.refresh()}}},_=(e(212),Object(c.a)(v,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("b-row",[e("order-edit",{ref:"editorder",on:{update:n.updateTable}}),n._v(" "),e("order-show",{ref:"showorder"}),n._v(" "),e("order-delete",{ref:"deleteorder",on:{update:n.updateTable}}),n._v(" "),e("raffle-edit",{ref:"editraffle",on:{update:n.updateTableRaffle}}),n._v(" "),e("h4",{staticClass:"text-uppercase"},[n._v("Ultimas Rifas")]),n._v(" "),e("b-col",{attrs:{xl:"12"}},[e("b-table",{ref:"tableRaffle",attrs:{responsive:"",items:n.fetchRaffle,fields:n.fields,hover:"","per-page":n.perPage,"current-page":n.page,"no-provider-sorting":"",small:"",fixed:"",striped:"",busy:n.isBusy,"empty-text":"Não há rifas para mostra","show-empty":""},scopedSlots:n._u([{key:"table-busy",fn:function(){return[e("div",{staticClass:"text-center text-success my-2"},[e("b-spinner",{staticClass:"align-middle"}),n._v(" "),e("strong",[n._v("Carregando...")])],1)]},proxy:!0},{key:"cell(created_at)",fn:function(t){return[n._v("\n        "+n._s(n._f("moment")(t.item.created_at,"DD/MM/YYYY HH:mm"))+"\n      ")]}},{key:"cell(draw_day)",fn:function(t){return[n._v("\n        "+n._s(n._f("moment")(t.item.draw_day,"dddd, DD/MM/YYYY"))+"\n      ")]}},{key:"cell(action)",fn:function(t){return[e("b-button",{attrs:{pill:"",to:"/draw/show/"+t.item.id,size:"sm"}},[e("font-awesome-icon",{attrs:{icon:["fa","eye"]}})],1),n._v(" "),e("b-button",{attrs:{pill:"",variant:"info",size:"sm"},on:{click:function(e){return n.$refs.editraffle.show(t.item.id)}}},[e("font-awesome-icon",{attrs:{icon:["fa","edit"]}})],1)]}}])})],1),n._v(" "),n.lastPage>1?e("b-col",{staticClass:"d-flex justify-content-center align-items-center",attrs:{xl:"12"}},[e("b-pagination",{attrs:{"total-rows":n.total,"per-page":n.perPage,align:"center"},model:{value:n.page,callback:function(t){n.page=t},expression:"page"}})],1):n._e(),n._v(" "),e("b-col",{staticClass:"mt-4",attrs:{xl:"6"}},[e("h4",{staticClass:"text-uppercase"},[n._v("Ultimas Compras")])]),n._v(" "),e("b-col",{staticClass:"mt-4",attrs:{xl:"6"}},[e("b-form-input",{attrs:{type:"text",debounce:"500",placeholder:"Buscar comprador"},model:{value:n.orderTable.filter,callback:function(t){n.$set(n.orderTable,"filter",t)},expression:"orderTable.filter"}})],1),n._v(" "),e("b-col",{staticClass:"mt-2",attrs:{xl:"12"}},[e("b-table",{ref:"orderTable",attrs:{responsive:"",items:n.fetchOrders,fields:n.orderTable.fields,hover:"","per-page":n.orderTable.perPage,"current-page":n.orderTable.page,"no-provider-sorting":"",small:"",fixed:"",striped:"",filter:n.orderTable.filter,"empty-text":"Não há pagamentos para mostra","show-empty":"",busy:n.orderTable.isBusy},scopedSlots:n._u([{key:"table-busy",fn:function(){return[e("div",{staticClass:"text-center text-success my-2"},[e("b-spinner",{staticClass:"align-middle"}),n._v(" "),e("strong",[n._v("Carregando...")])],1)]},proxy:!0},n.orderTable.total>0?{key:"cell(raffle)",fn:function(t){return[e("router-link",{attrs:{to:"/draw/show/"+t.item.raffle.id}},[n._v("\n          "+n._s(t.item.raffle.title)+"\n        ")])]}}:null,{key:"cell(tickets)",fn:function(t){return[n.orderTable.total>0?e("b-row",n._l(t.item.tickets,(function(t,a){return e("div",{key:"idx-"+a},[e("b-badge",{staticClass:"p-2 m-1",attrs:{variant:"success"}},[n._v(n._s(("0000"+t.ticket).slice(-4)))])],1)})),0):n._e()]}},n.orderTable.total>0?{key:"cell(expired_day)",fn:function(t){return[n._v("\n        "+n._s(n._f("moment")(t.item.expired_day,"DD/MM/YYYY"))+"\n      ")]}}:null,n.orderTable.total>0?{key:"cell(created_at)",fn:function(t){return[n._v("\n        "+n._s(n._f("moment")(t.item.created_at,"DD/MM/YYYY"))+"\n      ")]}}:null,n.orderTable.total>0?{key:"cell(action)",fn:function(t){return[e("b-button",{attrs:{pill:"",size:"sm"},on:{click:function(e){return n.$refs.showorder.show(t.item.id)}}},[e("font-awesome-icon",{attrs:{icon:["fa","eye"]}})],1),n._v(" "),e("b-button",{attrs:{pill:"",variant:"info",size:"sm"},on:{click:function(e){return n.$refs.editorder.show(t.item.id)}}},[e("font-awesome-icon",{attrs:{icon:["fa","edit"]}})],1),n._v(" "),e("b-button",{attrs:{pill:"",variant:"danger",size:"sm"},on:{click:function(e){return n.$refs.deleteorder.show(t.item.id)}}},[e("font-awesome-icon",{attrs:{icon:["fa","trash"]}})],1)]}}:null],null,!0)})],1),n._v(" "),n.orderTable.lastPage>1?e("b-col",{staticClass:"d-flex justify-content-center align-items-center mb-4",attrs:{xl:"12"}},[e("b-pagination",{attrs:{"total-rows":n.orderTable.total,"per-page":n.orderTable.perPage,align:"center"},model:{value:n.orderTable.page,callback:function(t){n.$set(n.orderTable,"page",t)},expression:"orderTable.page"}})],1):n._e()],1)}),[],!1,null,null,null));t.default=_.exports}}]);